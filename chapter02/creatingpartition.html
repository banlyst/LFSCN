<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      2.2.&nbsp;新建一个分区
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="lfs" id="lfs-SVN-20120328">
    <div class="navheader">
      <h4>
        Linux From Scratch - 版本 SVN-20120328
      </h4>
      <h3>
        第&nbsp;2&nbsp;章&nbsp;准备新分区
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="introduction.html" title="介绍">上一页</a>
          <p>
            介绍
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="creatingfilesystem.html" title=
          "在新分区上创建文件系统">下一页</a>
          <p>
            在新分区上创建文件系统
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter02.html" title=
          "第&nbsp;2&nbsp;章&nbsp;准备新分区">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 SVN-20120328">起始页</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="zh-cn" xml:lang="zh-cn">
      <h1 class="sect1">
        <a id="space-creatingpartition" name=
        "space-creatingpartition"></a>2.2. 新建一个分区
      </h1>
      <p>
        像大多数操作系统一样，LFS 系统通常被安装在一个磁盘分区上。我们建议使用一个空的分区构建一个 LFS
        系统，或者，如果你有足够多的未分配空间，新建一个分区。
      </p>
      <p>
        一个最小的系统需要一个至少 2.8GB 大的分区。这使得我们有足够的空间存储我们的软件包并进行编译。然而，如果你想要在这个 LFS
        系统之上安装其他的软件，额外的空间必不可少。一个 10GB 的分区是比较合理的。LFS
        系统本身并不使用这么大的空间，但是编译一些软件的时候需要比较大的临时空间。
      </p>
      <p>
        如果用户没有足够大的内存 (RAM) 进行编译，一个比较好的解决方法是使用 <code class=
        "systemitem">swap</code> 空间。内核使用这个机制提供更大的可用内存。LFS 系统可以与宿主系统使用同一个
        <code class="systemitem">swap</code> 分区，所以我们没有必要重新创建一个。
      </p>
      <p>
        使用磁盘分区工具 <span class="command"><strong>cfdisk</strong></span> 或者
        <span class="command"><strong>fdisk</strong></span>
        并将你希望使用的硬盘作为命令行参数传入—例如，<code class="filename">/dev/hda</code> 代表第一块
        IDE 硬盘。请根据需要创建一个 Linux 分区，或者 <code class="systemitem">swap</code>
        分区。如果你不知道如何使用这两个工具，请查阅 man 手册 <code class="filename">cfdisk(8)</code>
        或者 <code class="filename">fdisk(8)</code> 了解更多使用方法。
      </p>
      <div class="admon note">
        <img alt="[注意]" src="../images/note.png" />
        <h3>
          注意
        </h3>
        <p>
          对于有经验的用户来说，还可以选择其他的分区方案。新的 LFS 系统可以存在于软件 <a class="ulink" href=
          "http://www.linuxfromscratch.org/blfs//view/svn/postlfs/raid.html">RAID</a>
          阵列或者 <a class="ulink" href=
          "http://www.linuxfromscratch.org/blfs//view/svn/postlfs/aboutlvm.html">
          LVM</a> 逻辑卷上。然而，其中某些选项需求 <a class="ulink" href=
          "http://www.linuxfromscratch.org/blfs//view/svn/postlfs/initramfs.html">
          initramfs</a>， 这就是高级的话题了。这些分区方法对于第一次接触 LFS 的用户并不推荐。
        </p>
      </div>
      <p>
        请记住你将使用的分区 (例如<code class="filename">hda5</code>)。这本书将这个分区称作 LFS
        分区。同样记住 <code class="systemitem">swap</code> 分区的名称。这些名称会在
        <code class="filename">/etc/fstab</code> 文件中用到。
      </p>
      <div class="sect2" lang="zh-cn" xml:lang="zh-cn">
        <h2 class="sect2">
          2.2.1. 其他分区问题
        </h2>
        <p>
          LFS
          邮件列表中经常有人寻求系统分区建议。这是一个很主观的话题。多数发行版默认扣出一个小的交换分区然后使用整个驱动器。出于如下原因，这种做法对
          LFS 并不理想。它减弱了灵活性，使得在多个发行版或 LFS
          编制之间共享数据更困难，使备份更消耗时间，还会因为低效率的文件系统结构分布浪费磁盘空间。
        </p>
        <div class="sect3" lang="zh-cn" xml:lang="zh-cn">
          <h3 class="sect3">
            2.2.1.1. 根分区
          </h3>
          <p>
            LFS 根分区 (不要与 <code class="filename">/root</code> 目录混淆) 有 10GB
            对多数系统够用。它提供足够空间来编制 LFS 和 BLFS 的大部分，又小到可以很容易地创建多个分区用于实验。
          </p>
        </div>
        <div class="sect3" lang="zh-cn" xml:lang="zh-cn">
          <h3 class="sect3">
            2.2.1.2. 交换分区
          </h3>
          <p>
            很多发行版会自动创建交换分区。通常推荐交换分区相当于 RAM 的两倍大，但这其实很少用到。如果磁盘空间有限，将交换分区的尺寸限制到
            2GB，并监视磁盘交换用量。
          </p>
          <p>
            交换从来就不是好现象。通常只要听磁盘活动并观察系统对命令的响应即可判断它是否在交换。发现交换的第一反应应该是检查是否有没道理的命令，比如试图编辑
            5GB 大的文件。如果交换经常发生，最好的解决方式应该是给电脑加内存。
          </p>
        </div>
        <div class="sect3" lang="zh-cn" xml:lang="zh-cn">
          <h3 class="sect3">
            2.2.1.3. 便捷分区
          </h3>
          <p>
            还有几个不强制要求的分区，在设计磁盘布局的时候应该考虑一下。以下列表可能不全面，只作向导用。
          </p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
                  /boot –
                  高度推荐。用这个分区来存放内核和其他启动信息。为了减少大磁盘的间歇启动问题，把此分区作为磁盘上的第一个物理分区。有
                  100MB 就足够了。
                </p>
              </li>
              <li>
                <p>
                  /home – 高度推荐。在多个发行版或 LFS
                  编制之间共享主目录和用户自定义配置。通常尺寸很大，取决与可用磁盘空间。
                </p>
              </li>
              <li>
                <p>
                  /usr – 独立的 /usr 分区通常用于给小客户端或无磁盘工作站作服务器。LFS 中通常不需要。5GB
                  的尺寸可以容纳多数安装。
                </p>
              </li>
              <li>
                <p>
                  /opt – 此目录在 BLFS 中多重安装 Gnome、KDE 等大程序包而不用将文件嵌入 /usr
                  目录时最有用。如果要用， 5-10GB 通常很适宜。
                </p>
              </li>
              <li>
                <p>
                  /tmp – 独立的 /tmp 目录很少见，但是在配置小客户端时很有用。此分区如果使用，通常不必超过几 GB。
                </p>
              </li>
              <li>
                <p>
                  /usr/src – 此分区非常有用，可以提供一个位置来存放 BLFS 源文件并在 LFS
                  编制之间共享。它也可以用作编译 BLFS 程序包的位置。大到 30-50GB 不无道理，可以提供充足的空间。
                </p>
              </li>
            </ul>
          </div>
          <p>
            你想在启动时自动挂载的任何分区都要在 <code class="filename">/etc/fstab</code>
            中指定。关于如何指定分区的细节位于 <a class="xref" href="../chapter08/fstab.html"
            title="8.2.&nbsp;创建 /etc/fstab 文件">第&nbsp;8.2&nbsp;节 “创建
            /etc/fstab 文件”</a>。
          </p>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="introduction.html" title="介绍">上一页</a>
          <p>
            介绍
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="creatingfilesystem.html" title=
          "在新分区上创建文件系统">下一页</a>
          <p>
            在新分区上创建文件系统
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter02.html" title=
          "第&nbsp;2&nbsp;章&nbsp;准备新分区">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 SVN-20120328">起始页</a>
        </li>
      </ul>
    </div>
  </body>
</html>
